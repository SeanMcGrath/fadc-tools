#!/bin/bash

usage (){
	echo ""
	echo "Usage: view_waves [OPTIONS] ROOT_FILE"
	echo "View the raw waveforms in an fADC125 root file, with peak boundaries shown."
	echo "options:"
	echo "	-c, --channel CHANNEL		Select ADC channel to read (default 1)"
	echo "  -y, --yrange YRANGE		Set maximum of Y axis range"
	echo "	-a, --auto			Turn on automatic Y axis range"
	echo ""
}

CHANNEL=1
YRANGE=2000.0
AUTOY="false"

while [[ $# > 1 ]]
do
	key="$1"

	case $key in
		-c|--channel)
		CHANNEL="$2"
		shift # past argument
		;;
		-y|--yrange)
		YRANGE="$2"
		shift
		;;
		-a|--auto)
		AUTO="true"
		shift
		;;
		*)
		echo "Unknown option: $1"
		exit
		;;
	esac
	
	shift # past argument or value
done

if [ "$#" -lt 1 ] ; then usage ; exit ; fi

if [ ! -e "$1" ] ; then
	echo "file $1 does not exist!"
else
	exec 2> /dev/null
	echo "$file"
	root -q 'TWaveScannerMacro.c("'"$1"'", '"$CHANNEL"', '"$YRANGE"', '"$AUTOY"')'
fi

